<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>useState Hook 만들기</title>

    <link rel="stylesheet" href="../css/reset.css"/>
</head>

<body>
    <script type="x-template">
        <pre>
            <h2>UseState Hook 만들기</h2>
            <ul>
                <li>
                    <a href="https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Make-useSate-hook">https://junilhwang.github.io/TIL/Javascript/Design/Vanilla-JS-Make-useSate-hook</a>
                </li>
                <li>
                    <a href="https://stackoverflow.com/questions/64744252/how-to-replicate-usestate-with-vanilla-js">https://stackoverflow.com/questions/64744252/how-to-replicate-usestate-with-vanilla-js</a>
                </li>
                <li>
                    <a href="https://stackoverflow.com/questions/64744252/how-to-replicate-usestate-with-vanilla-js">https://stackoverflow.com/questions/64744252/how-to-replicate-usestate-with-vanilla-js</a>
                </li>
            </ul>
        <pre>
    </script>
    <xmp>
    React의 useState Hook의 작동방식에 대해 이해하고, 구현해 봅니다.
    </xmp>
    <hr>

    <div id="app">
        요기에
    </div>
</body>

</html>

<script>
    let state= undefined; // state를 정의한다.

    function useState(initState) {
        // state에 값이 없을 때만 초기화를 진행한다.
        if (state === undefined) {
            state = initState;
        }
        const setState = (newState) => {
            state = newState; // 새로운 state를 할당한다
            render(); // render를 실행한다.
        }

        return [ state, setState ];
    }

    function Counter () {
        const [count, setCount] = useState(1);

        increment = () => {
            setCount(count + 1);
        }

        return `
            <div>
                <strong>count: ${count} </strong>
                <button onclick="increment()">증가</button>
            </div>
        `;
    }

    function render () {
        const $app = document.querySelector('#app');
        $app.innerHTML = Counter();
    }

    render();
</script>